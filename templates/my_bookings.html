{% extends "layout.html" %}

{% block title %}My Bookings - HomeHaven{% endblock %}

{% block content %}
<div class="animate-fade-in">
  <div class="mb-10">
    <h1 class="text-4xl font-extrabold text-[#003366] mb-2 uppercase italic tracking-tight">Booking History</h1>
    <p class="text-gray-500 font-medium">Track your room reservation status and payment details.</p>
  </div>

  {% if bookings %}
  <div class="glass-card rounded-2xl overflow-hidden bg-white shadow-2xl border-b-8 border-[#003366]">
    <div class="overflow-x-auto">
      <table class="w-full text-left">
        <thead class="bg-[#003366] text-white">
          <tr>
            <th class="px-8 py-5 text-[10px] font-black uppercase tracking-widest">Property Details</th>
            <th class="px-8 py-5 text-[10px] font-black uppercase tracking-widest">Check-in</th>
            <th class="px-8 py-5 text-[10px] font-black uppercase tracking-widest">M-Pesa Code</th>
            <th class="px-8 py-5 text-[10px] font-black uppercase tracking-widest text-center">Status</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-50">
          {% for booking in bookings %}
          <tr class="hover:bg-[#f0f4f8]/50 transition duration-200">
            <td class="px-8 py-6">
              <div class="font-extrabold text-[#003366] text-sm">{{ booking[3] }}</div>
              <div class="text-[10px] text-gray-400 font-bold uppercase tracking-widest">{{ booking[5] }} Months Stay
              </div>
            </td>
            <td class="px-8 py-6 text-gray-600 text-xs font-bold">{{ booking[4] }}</td>
            <td class="px-8 py-6">
              <span
                class="bg-[#f0f4f8] border border-[#003366]/20 px-3 py-1 rounded text-xs font-mono font-bold text-[#003366]">
                {{ booking[8] if booking[8] else 'PENDING VERIFICATION' }}
              </span>
            </td>
            <td class="px-8 py-6 text-center">
              <span
                class="inline-flex items-center gap-1.5 px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest
                                {% if booking[9] == 'Confirmed' %}badge-vacant{% else %}badge-booked{% endif %} shadow-sm">
                <i
                  class="fas {% if booking[9] == 'Confirmed' %}fa-check-double{% else %}fa-hourglass-half{% endif %}"></i>
                {{ booking[9] if booking[9] else 'Pending' }}
              </span>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
  {% else %}
  <div class="glass-card p-20 rounded-3xl text-center bg-white shadow-lg border-2 border-dashed border-gray-200">
    <i class="fas fa-receipt text-6xl text-gray-100 mb-6"></i>
    <h3 class="text-xl font-bold text-[#003366] opacity-40 uppercase mb-8 italic">No housing applications found</h3>
    <a href="/house" class="btn-primary shadow-xl">EXPLORE ROOMS NOW</a>
  </div>
  {% endif %}

  <div class="mt-12 p-6 bg-[#f0f4f8] rounded-xl flex items-center gap-4 border border-[#003366]/10">
    <i class="fas fa-info-circle text-[#003366] text-xl"></i>
    <p class="text-xs text-gray-500 italic">Bookings are marked as <strong>Confirmed</strong> only after M-Pesa
      transaction verification by the LupahTech administration team.</p>
  </div>
</div>
{% endblock %}