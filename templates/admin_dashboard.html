{% extends "layout.html" %}

{% block title %}Admin Control Center - CampusRooms{% endblock %}

{% block content %}
<div class="px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto py-12 animate-fade-in">
  <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-12">
    <div>
      <h1 class="text-4xl font-black text-white mb-2 uppercase italic tracking-tight">Admin <span
          class="text-[#FFCC00]">Control</span> Center</h1>
      <p class="text-gray-400 font-medium">LupahTech Integrated Management System</p>
    </div>
    <div class="flex flex-wrap gap-4">
      <a href="/landlord-signup" class="btn-primary py-3 px-8 text-[10px] shadow-xl">ADD NEW LANDLORD</a>
      <a href="/logout"
        class="bg-white/5 border border-white/10 text-white px-8 py-3 rounded-lg text-[10px] font-black hover:bg-red-500/10 hover:text-red-400 hover:border-red-500/30 transition uppercase tracking-widest">LOGOUT</a>
    </div>
  </div>

  <!-- Stats Overview -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-16">
    <div class="glass-card p-8 bg-[#1e293b]/50 border-white/5 relative overflow-hidden group">
      <div class="absolute -right-4 -bottom-4 opacity-[0.03] group-hover:opacity-[0.1] transition-opacity">
        <i class="fas fa-receipt text-9xl text-white"></i>
      </div>
      <div class="text-[10px] font-black text-gray-500 uppercase mb-2 tracking-widest">Total Transactions</div>
      <div class="text-4xl font-black text-white group-hover:text-[#FFCC00] transition-colors">{{ bookings|length }}
      </div>
    </div>
    <div class="glass-card p-8 bg-[#1e293b]/50 border-white/5 relative overflow-hidden group">
      <div class="absolute -right-4 -bottom-4 opacity-[0.03] group-hover:opacity-[0.1] transition-opacity">
        <i class="fas fa-home text-9xl text-white"></i>
      </div>
      <div class="text-[10px] font-black text-gray-500 uppercase mb-2 tracking-widest">Active Inventory</div>
      <div class="text-4xl font-black text-white group-hover:text-[#FFCC00] transition-colors">{{ houses|length }}</div>
    </div>
    <div class="glass-card p-8 bg-[#1e293b]/50 border-white/5 relative overflow-hidden group">
      <div class="absolute -right-4 -bottom-4 opacity-[0.03] group-hover:opacity-[0.1] transition-opacity">
        <i class="fas fa-coins text-9xl text-white"></i>
      </div>
      <div class="text-[10px] font-black text-gray-500 uppercase mb-2 tracking-widest">Projected Revenue</div>
      <div class="text-4xl font-black text-white group-hover:text-[#FFCC00] transition-colors">KSh {{ (bookings|length *
        500) }}</div>
    </div>
  </div>

  <div class="space-y-16">
    <!-- Bookings Management -->
    <div class="glass-card rounded-[2rem] overflow-hidden shadow-2xl bg-[#1e293b]/30 border-white/5">
      <div class="p-8 bg-white/5 border-b border-white/5 flex justify-between items-center">
        <h2 class="text-lg font-black text-white uppercase italic tracking-wider"><i
            class="fas fa-history mr-3 text-[#FFCC00]"></i>Recent Transactions</h2>
      </div>
      <div class="overflow-x-auto">
        <table class="w-full text-left">
          <thead>
            <tr class="bg-black/20">
              <th class="px-8 py-5 text-[10px] font-black text-gray-500 uppercase tracking-widest">Client</th>
              <th class="px-8 py-5 text-[10px] font-black text-gray-500 uppercase tracking-widest">Asset</th>
              <th class="px-8 py-5 text-[10px] font-black text-gray-500 uppercase tracking-widest">Payment Ref</th>
              <th class="px-8 py-5 text-[10px] font-black text-gray-500 uppercase tracking-widest">Status</th>
              <th class="px-8 py-5 text-[10px] font-black text-gray-500 uppercase tracking-widest text-right">Ops</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-white/5">
            {% for booking in bookings %}
            <tr class="hover:bg-white/5 transition duration-300 group">
              <td class="px-8 py-6">
                <div class="font-black text-white text-sm tracking-tight">{{ booking[1] }}</div>
                <div class="text-[9px] font-bold text-gray-500 uppercase tracking-widest mt-1">{{ booking[2] }}</div>
              </td>
              <td class="px-8 py-6">
                <div class="text-xs text-[#FFCC00] font-black italic">{{ booking[3] }}</div>
              </td>
              <td class="px-8 py-6">
                <span
                  class="bg-white/5 border border-white/10 px-3 py-1.5 rounded-lg text-[10px] font-mono font-black text-white/70">
                  {{ booking[8] if booking[8] else 'PENDING' }}
                </span>
              </td>
              <td class="px-8 py-6">
                <span class="text-[9px] font-black px-4 py-1.5 rounded-full uppercase tracking-tighter shadow-inner
                                    {% if booking[9] == 'Confirmed' %}badge-vacant{% else %}badge-booked{% endif %}">
                  {{ booking[9] if booking[9] else 'Processing' }}
                </span>
              </td>
              <td class="px-8 py-6 text-right">
                <a href="/admin/delete-booking/{{ booking[0] }}"
                  class="w-8 h-8 inline-flex items-center justify-center rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500 hover:text-white transition"
                  onclick="return confirm('Archive this transaction?')">
                  <i class="fas fa-trash-alt text-xs"></i>
                </a>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>

    <!-- Inventory Management -->
    <div class="glass-card rounded-[2rem] overflow-hidden shadow-2xl bg-[#1e293b]/30 border-white/5">
      <div class="p-8 bg-white/5 border-b border-white/5 flex justify-between items-center">
        <h2 class="text-lg font-black text-white uppercase italic tracking-wider"><i
            class="fas fa-boxes mr-3 text-[#FFCC00]"></i>Inventory Control</h2>
      </div>
      <div class="overflow-x-auto">
        <table class="w-full text-left">
          <thead>
            <tr class="bg-black/20">
              <th class="px-8 py-5 text-[10px] font-black text-gray-500 uppercase tracking-widest">Resource Name</th>
              <th class="px-8 py-5 text-[10px] font-black text-gray-500 uppercase tracking-widest">Rate (PM)</th>
              <th class="px-8 py-5 text-[10px] font-black text-gray-500 uppercase tracking-widest">Lifecycle</th>
              <th class="px-8 py-5 text-[10px] font-black text-gray-500 uppercase tracking-widest text-right">Ops</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-white/5">
            {% for house in houses %}
            <tr class="hover:bg-white/5 transition duration-300">
              <td class="px-8 py-6">
                <div class="font-black text-white text-sm tracking-tight">{{ house[1] }}</div>
                <div class="text-[9px] font-bold text-gray-500 uppercase tracking-widest mt-1">{{ house[3] }}</div>
              </td>
              <td class="px-8 py-6">
                <div class="text-sm font-black text-[#FFCC00]">KSh {{ house[4] }}</div>
              </td>
              <td class="px-8 py-6">
                <span
                  class="text-[9px] font-black px-4 py-1.5 rounded-full uppercase tracking-tighter shadow-inner
                                    {% if house.availability == 'Vacant' %}badge-vacant{% else %}badge-booked{% endif %}">
                  {{ house.availability }}
                </span>
              </td>
              <td class="px-8 py-6 text-right">
                <a href="/admin/delete-house/{{ house[0] }}"
                  class="w-8 h-8 inline-flex items-center justify-center rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500 hover:text-white transition"
                  onclick="return confirm('Remove this listing permanently?')">
                  <i class="fas fa-trash-alt text-xs"></i>
                </a>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
{% endblock %}